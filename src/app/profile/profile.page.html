<ion-header>
  <ion-toolbar>
    <ion-title>User Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div *ngIf="user" class="profile-container">
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ user.name }}</ion-card-title>
        <ion-card-subtitle>{{ user.email }}</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <ion-list lines="none">
          <ion-item>
            <ion-label>
              <h2>Email Verified:</h2>
              <p>{{ user.email_verified_at ? 'Yes' : 'No' }}</p>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-label>
              <h2>Member Since:</h2>
              <p>{{ formatDate(user.created_at) }}</p>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-label>
              <h2>Last Updated:</h2>
              <p>{{ formatDate(user.updated_at) }}</p>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-label>
              <h2>Roles:</h2>
              <p>{{ getRoleNames() }}</p>
            </ion-label>
          </ion-item>
        </ion-list>

        <div *ngIf="user && user.karyawan" class="karyawan-details">
          <ion-item-divider>
            <ion-label>
              Karyawan Details
            </ion-label>
          </ion-item-divider>

          <ion-list lines="none">
              <ion-item>
                  <ion-label>
                  <h3>Nama Lengkap</h3>
                  <p>{{ user.karyawan.nama_lengkap }}</p>
                  </ion-label>
              </ion-item>
              <ion-item>
                  <ion-label>
                  <h3>NIP</h3>
                  <p>{{ user.karyawan.nip }}</p>
                  </ion-label>
              </ion-item>
              <ion-item>
                  <ion-label>
                  <h3>Shift ID</h3>
                  <p>{{ user.karyawan.shift_id }}</p>
                  </ion-label>
              </ion-item>
              <ion-item>
                  <ion-label>
                  <h3>Divisi ID</h3>
                  <p>{{ user.karyawan.divisi_id }}</p>
                  </ion-label>
              </ion-item>
              <ion-item>
                  <ion-label>
                  <h3>Phone</h3>
                  <p>{{ user.karyawan.phone }}</p>
                  </ion-label>
              </ion-item>
              <ion-item>
                  <ion-label>
                  <h3>Status Kerja</h3>
                  <p>{{ user.karyawan.status_kerja }}</p>
                  </ion-label>
              </ion-item>
              <ion-item>
                  <ion-label>
                  <h3>Berhak Konsumsi</h3>
                  <p>{{ user.karyawan.berhak_konsumsi ? 'Ya' : 'Tidak' }}</p>
                  </ion-label>
              </ion-item>
          </ion-list>
        </div>
      </ion-card-content>
    </ion-card>

    <ion-button expand="block" color="danger" class="logout-button ion-margin-top" (click)="navigateTo('/login-page')">
      Logout
      <ion-icon slot="end" name="log-out"></ion-icon>
    </ion-button>

  </div>

  <div *ngIf="!user" class="ion-text-center ion-padding">
    <p>Loading user data...</p>
  </div>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-tabs>
      <ion-tab-bar slot="bottom">
        <ion-tab-button (click)="navigateTo('/home')">
          <ion-icon name="home"></ion-icon>
          <ion-label>Home</ion-label>
        </ion-tab-button>

        <ion-tab-button (click)="navigateTo('/qr-code')">
          <ion-icon name="qr-code"></ion-icon>
          <ion-label>QR Code</ion-label>
        </ion-tab-button>

        <ion-tab-button (click)="navigateTo('/profile')">
          <ion-icon name="person"></ion-icon>
          <ion-label>Profile</ion-label>
        </ion-tab-button>
      </ion-tab-bar>
    </ion-tabs>
  </ion-toolbar>
</ion-footer>